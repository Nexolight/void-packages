# Template file for 'LookingGlass'
pkgname=LookingGlass
version=11
revision=0
#wrksrc=
#create_wrksrc=yes
#only_for_archs="i686 x86_64"
build_style=gnu-makefile
#configure_args=""
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="pkg-config"
makedepends="SDL2_ttf-devel spice-protocol libconfig-devel
 fontconfig-devel libva-glx-devel libressl-devel git nettle-devel"
depends="spice-protocol nettle"
short_desc="An extremely low latency KVM FrameReleas for VGA PCIe Passthrough"
maintainer="nexolight <snow.dream.ch@gmail.com>"
license="GPL-2"
homepage="https://looking-glass.hostfission.com"
wrksrc="${pkgname}-a${version}"
distfiles="https://github.com/gnif/LookingGlass/archive/a${version}.tar.gz"
checksum=65f2045b8daeb019a761921fbc2a638a449f06491f28ac27d6c65031c6f51c87


do_config(){
	echo "There's nothing to configure - skip"
}

do_build(){
	make -j ${makejobs} -C client
}

do_install(){
	cd client
	vmkdir /usr/bin
	vmkdir /usr/lib
	vcopy bin/looking-glass-client /usr/bin
	vcopy bin/*.so /usr/lib

	vmkdir /opt/LookingGlass/windows/driver
	vmkdir /opt/LookingGlass/windows/host
	vinstall ${FILESDIR}/ivshmem2.zip 755 /opt/${pkgname}/windows/driver
	vinstall ${FILESDIR}/looking-glass-host-a${version}.zip 755 /opt/${pkgname}/windows/host
}
