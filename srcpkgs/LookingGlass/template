# Template file for 'LookingGlass'
pkgname=LookingGlass
version=10
revision=0
#wrksrc=
#create_wrksrc=yes
#only_for_archs="i686 x86_64"
build_style=gnu-makefile
#configure_args=""
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="pkg-config"
makedepends="SDL2_ttf-devel spice-protocol libconfig-devel
 fontconfig-devel libva-glx-devel libressl-devel git"
depends="spice-protocol"
short_desc="An extremely low latency KVM FrameReleas for VGA PCIe Passthrough"
maintainer="nexolight <snow.dream.ch@gmail.com>"
license="GPL-2"
homepage="https://looking-glass.hostfission.com"
wrksrc="${pkgname}-a${version}"
distfiles="https://github.com/gnif/LookingGlass/archive/a${version}.tar.gz"
checksum=ccd058aae61bc09b1dd9e2dc882cd6bf1e4ad60dd496cc512a0ae4bf627a9d7e


do_config(){
	echo "There's nothing to configure - skip"
}

do_build(){
	make -j ${makejobs} -C client
}

do_install(){
	cd client
	vmkdir /usr/bin
	vcopy bin/looking-glass-client /usr/bin

	vmkdir /opt/LookingGlass/windows/driver
	vmkdir /opt/LookingGlass/windows/host
	vinstall ${FILESDIR}/ivshmem2.zip 755 /opt/${pkgname}/windows/driver
	vinstall ${FILESDIR}/looking-glass-host-a10.zip 755 /opt/${pkgname}/windows/host
}
