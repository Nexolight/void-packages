# Template file for 'ldb'
pkgname=ldb
version=1.1.26
revision=1
build_style=waf
configure_script=buildtools/bin/waf
hostmakedepends="python pkg-config"
makedepends="talloc-devel tevent-devel tdb-devel popt-devel"
short_desc="An LDAP-like database from samba"
maintainer="Michael Aldridge <aldridge.mac@gmail.com>"
license="GPL-3"
homepage="https://www.samba.org/ldb/"
distfiles="https://www.samba.org/ftp/pub/ldb/ldb-${version}.tar.gz"
checksum=8843c7a72b980d9413ba6c494c039bccd10c524b37fda2917afb147745d8b2e6

case "$XBPS_TARGET_MACHINE" in
	armv[67]l) broken="https://s3.amazonaws.com/archive.travis-ci.org/jobs/136285322/log.txt";;
	*-musl) broken="https://api.travis-ci.org/jobs/136285324/log.txt?deansi=true";;
esac


ldb-devel_package() {
	short_desc+=" - development files"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
	}
}
