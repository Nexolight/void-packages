# Template file for 'qubes-core-vchan-xen'
pkgname=qubes-core-vchan-xen
version=4.0.5
revision=1
build_style=gnu-configure
make_build_args="all"
make_install_args=""
hostmakedepends=""
makedepends="qubes-vmm-xen"
depends="qubes-vmm-xen"
short_desc="The Qubes core libs for installation inside a Qube"
maintainer="nexolight <snow.dream.ch@gmail.com>"
license="GPL"
homepage="http://qubes-os.org"
shlib_provides="libvchan-xen.so libu2mfn.so"
distfiles="https://github.com/QubesOS/${pkgname}/archive/v${version}.tar.gz"
checksum="10daa0a48114210b4f329a72c12fd385c65e1770d0849d4c09d72e872ec5750f"

do_configure(){
	echo "Skip configure"
}

do_build(){
	make -j ${makejobs} ${make_build_args}
}

do_install(){
	make install DESTDIR=${DESTDIR} ${make_install_args}
	#vmkdir "usr/lib"
	#vcopy "${wrksrc}/vchan/*.so" "usr/lib/"
	#vcopy "${wrksrc}/u2mfn/*.so" "usr/lib/"
}

qubes-core-vchan-xen-devel_package(){
	short_desc="devel package of qubes-core-vchan-xen"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install(){
		#vmove usr/lib/*.a
		vmove usr/include/*.h
		vmove usr/include/vchan-xen/*.h
		vmove usr/lib/pkgconfig/vchan-xen.pc
		
	}
}
