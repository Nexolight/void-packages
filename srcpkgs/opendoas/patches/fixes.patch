--- bsd.prog.mk
+++ bsd.prog.mk
@@ -14,7 +14,7 @@ libopenbsd.a: ${OPENBSD}
 	${AR} -r $@ $?
 
 ${PROG}: ${OBJS} libopenbsd.a
-	${CC} ${CFLAGS} ${LDFLAGS} $^ -o $@
+	${CC} ${CFLAGS} $^ -o $@ ${LDFLAGS}
 
 install: ${PROG} ${PAM_DOAS} ${MAN}
 	mkdir -p -m 0755 ${DESTDIR}${BINDIR}
@@ -22,7 +22,6 @@ install: ${PROG} ${PAM_DOAS} ${MAN}
 	mkdir -p -m 0755 ${DESTDIR}${MANDIR}/man1
 	mkdir -p -m 0755 ${DESTDIR}${MANDIR}/man5
 	cp -f ${PROG} ${DESTDIR}${BINDIR}
-	chown ${BINOWN}:${BINGRP} ${DESTDIR}${BINDIR}/${PROG}
 	chmod ${BINMODE} ${DESTDIR}${BINDIR}/${PROG}
 	cp ${PAM_DOAS} ${DESTDIR}${PAMDIR}/doas
 	chmod 0644 ${DESTDIR}${PAMDIR}/doas
--- doas.c
+++ doas.c
@@ -295,7 +295,9 @@ checkconfig(const char *confpath, int argc, char **argv,
 {
 	struct rule *rule;
 
-	setresuid(uid, uid, uid);
+	if (setresuid(uid, uid, uid) != 0)
+		err(1, "can't setresuid");
+
 	parseconfig(confpath, 0);
 	if (!argc)
 		exit(0);
--- libopenbsd/openbsd.h
+++ libopenbsd/openbsd.h
@@ -3,7 +3,6 @@
 
 #include <stdarg.h>
 #include <sys/types.h>
-#include <sys/cdefs.h>
 
 #include "readpassphrase.h"
 
