# Template file for 'golly'
pkgname=golly
version=2.8
revision=1
wrksrc="${pkgname}-${version}-src"
build_style=gnu-configure
build_wrksrc="build"
configure_script="../gui-wx/configure/configure"
configure_args="--with-wx-config=wx-config-3.0 LIBS=-lGL"
hostmakedepends="automake"
makedepends="MesaLib-devel glu-devel lua-devel python-devel wxWidgets-devel
 zlib-devel"
short_desc="Simulator for Conway's Game of Life and other cellular automata"
maintainer="Christian Neukirchen <chneukirchen@gmail.com>"
license="GPL-2"
homepage="http://golly.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-${version}-src.tar.gz"  
checksum=bfe653b021afd46323770810011e381801d90d838aa26d5c5dab616c4a3e8eaf

post_extract() {
	# POSIX name clash
	sed -i 's/PAGESIZE/GOLLYPAGESIZE/' gui-wx/*.cpp
	mkdir -p build
}

pre_configure() {
	(
		cd ../gui-wx/configure
		rm config.status
		sed -i '/LDADD/s/ liblua\.a/ -llua5.3/g' Makefile.am
		./autogen.sh
	)
}
