# Template file for 'ipfs-cluster'
pkgname=ipfs-cluster
version=0.1.0
revision=1
build_style=go
go_import_path="github.com/ipfs/ipfs-cluster"
go_package="github.com/ipfs/ipfs-cluster/ipfs-cluster-ctl github.com/ipfs/ipfs-cluster/ipfs-cluster-service"
hostmakedepends="git wget"
depends="go-ipfs"
short_desc="Collective pinning and composition for IPFS"
maintainer="Toyam Cox <Vaelatern@gmail.com>"
license="MIT"
homepage="https://github.com/ipfs/ipfs-cluster"
distfiles="https://github.com/ipfs/ipfs-cluster/archive/v${version}.tar.gz"
checksum=cd7ac1c97f5365a5592d502d7b21dfe8453afea37331028dcce98c1a6534b4f4

case "${XBPS_TARGET_MACHINE}" in
	*-musl) broken="Downloads gx-go and can't execute it";;
esac

# regular go mechanisms don't work, and upstream says to do this
pre_build() {
	make deps
}

post_install() {
	vlicense LICENSE
	vdoc README.md
}
